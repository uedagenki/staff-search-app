<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¹ã‚¿ãƒƒãƒ•æ–°è¦ç™»éŒ² - STAFF SEARCH</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #2d2d2d 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .register-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        .register-header {
            background: linear-gradient(135deg, #0a0a0a 0%, #2d2d2d 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .register-header h1 {
            font-size: 24px;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .register-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .register-body {
            padding: 30px;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: #333;
            font-size: 14px;
            font-weight: 600;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #0a0a0a;
            box-shadow: 0 0 0 3px rgba(10, 10, 10, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .photo-upload {
            padding: 30px;
            border: 2px dashed #e0e0e0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .photo-upload:hover {
            border-color: #0a0a0a;
            background: rgba(10, 10, 10, 0.02);
        }

        .photo-upload input[type="file"] {
            display: none;
        }

        .photo-upload-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .skip-button {
            background: transparent;
            color: #666;
            border: none;
            padding: 8px 16px;
            font-size: 13px;
            cursor: pointer;
            text-decoration: underline;
            margin-top: 10px;
        }

        .register-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #0a0a0a 0%, #2d2d2d 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .register-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(10, 10, 10, 0.3);
        }

        .login-link {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
        }

        .login-link a {
            color: #0a0a0a;
            text-decoration: none;
            font-weight: 600;
        }

        .login-link a:hover {
            text-decoration: underline;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="register-container">
        <div class="register-header">
            <h1>ğŸ’¼ ã‚¹ã‚¿ãƒƒãƒ•æ–°è¦ç™»éŒ²</h1>
            <p style="color: white; margin-top: 10px; font-size: 14px;">ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³ã§ä»Šã™ãé–‹å§‹</p>
            <p>ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã¨ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ</p>
        </div>

        <div class="register-body">
            <form id="staffRegisterForm">
                <div class="form-group">
                    <label for="name">ãŠåå‰ <span style="color: red;">*</span></label>
                    <input 
                        type="text" 
                        id="name" 
                        name="name" 
                        placeholder="å±±ç”° å¤ªéƒ" 
                        required
                    >
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="storeName">åº—èˆ—å</label>
                        <input 
                            type="text" 
                            id="storeName" 
                            name="storeName" 
                            placeholder="ã€‡ã€‡ã‚µãƒ­ãƒ³"
                        >
                    </div>

                    <div class="form-group">
                        <label for="companyName">ä¼šç¤¾å</label>
                        <input 
                            type="text" 
                            id="companyName" 
                            name="companyName" 
                            placeholder="æ ªå¼ä¼šç¤¾ã€‡ã€‡"
                        >
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="age">å¹´é½¢ <span style="color: red;">*</span></label>
                        <input 
                            type="number" 
                            id="age" 
                            name="age" 
                            placeholder="25" 
                            min="18"
                            max="100"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label for="gender">æ€§åˆ¥ <span style="color: red;">*</span></label>
                        <select id="gender" name="gender" required>
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="male">ç”·æ€§</option>
                            <option value="female">å¥³æ€§</option>
                            <option value="other">ãã®ä»–</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="address">ä½æ‰€ <span style="color: red;">*</span></label>
                    <div style="display: flex; gap: 10px;">
                        <input 
                            type="text" 
                            id="address" 
                            name="address" 
                            placeholder="æ±äº¬éƒ½æ¸‹è°·åŒº" 
                            required
                            style="flex: 1;"
                        >
                        <button 
                            type="button" 
                            id="getLocationBtn"
                            style="padding: 10px 15px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; white-space: nowrap; font-size: 14px;"
                            title="ç¾åœ¨åœ°ã®ä½æ‰€ã‚’å–å¾—"
                        >
                            ğŸ“ ç¾åœ¨åœ°å–å¾—
                        </button>
                    </div>
                    <div id="locationStatus" style="font-size: 12px; margin-top: 5px; color: #666;"></div>
                </div>

                <div class="form-group">
                    <label for="jobTitle">è·ç¨® <span style="color: red;">*</span></label>
                    <select id="jobTitle" name="jobTitle" required>
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="beautician">ç¾å®¹å¸«</option>
                        <option value="consultant">ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ</option>
                        <option value="trainer">ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼</option>
                        <option value="lawyer">å¼è­·å£«ãƒ»å£«æ¥­</option>
                        <option value="designer">ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼</option>
                        <option value="engineer">ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</option>
                        <option value="teacher">è¬›å¸«ãƒ»æ•™å¸«</option>
                        <option value="medical">åŒ»ç™‚å¾“äº‹è€…</option>
                        <option value="other">ãã®ä»–</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ</label>
                    <div class="photo-upload" onclick="document.getElementById('photoUpload').click()">
                        <input type="file" id="photoUpload" accept="image/*">
                        <div class="photo-upload-icon">ğŸ“·</div>
                        <p style="color: #666; font-size: 14px;">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</p>
                        <p style="color: #999; font-size: 12px; margin-top: 8px;">æ¨å¥¨: æ­£æ–¹å½¢ã€æœ€å° 400x400px</p>
                    </div>
                    <button type="button" class="skip-button" onclick="skipPhoto()">å†™çœŸã¯å¾Œã§è¿½åŠ ã™ã‚‹</button>
                </div>

                <div class="form-group">
                    <label for="experience">çµŒé¨“å¹´æ•° <span style="color: red;">*</span></label>
                    <input 
                        type="number" 
                        id="experience" 
                        name="experience" 
                        placeholder="5" 
                        min="0"
                        max="50"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="bio">è‡ªå·±ç´¹ä»‹ <span style="color: red;">*</span></label>
                    <textarea 
                        id="bio" 
                        name="bio" 
                        placeholder="ã‚ãªãŸã®çµŒé¨“ã‚„ã‚¹ã‚­ãƒ«ã€å¼·ã¿ãªã©ã‚’è‡ªç”±ã«è¨˜å…¥ã—ã¦ãã ã•ã„..."
                        required
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span style="color: red;">*</span></label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        placeholder="example@email.com" 
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span style="color: red;">*</span></label>
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        placeholder="8æ–‡å­—ä»¥ä¸Š" 
                        minlength="8"
                        required
                    >
                </div>

                <button type="submit" class="register-button">ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³ã§ç™»éŒ²ã™ã‚‹</button>

                <div class="login-link">
                    ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯ <a href="staff_login.html">ãƒ­ã‚°ã‚¤ãƒ³</a>
                </div>
            </form>
        </div>
    </div>

    <script>
        let photoSkipped = false;

        function skipPhoto() {
            photoSkipped = true;
            document.querySelector('.photo-upload').style.opacity = '0.5';
            document.querySelector('.skip-button').textContent = 'å†™çœŸã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã—ãŸ';
        }

        // å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        document.getElementById('photoUpload').addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                const fileName = e.target.files[0].name;
                document.querySelector('.photo-upload p').textContent = `é¸æŠæ¸ˆã¿: ${fileName}`;
                document.querySelector('.photo-upload').style.borderColor = '#0a0a0a';
                document.querySelector('.skip-button').style.display = 'none';
            }
        });

        // ä½ç½®æƒ…å ±å–å¾—æ©Ÿèƒ½
        document.getElementById('getLocationBtn').addEventListener('click', async function() {
            const statusDiv = document.getElementById('locationStatus');
            const addressInput = document.getElementById('address');
            const btn = this;
            
            // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            btn.disabled = true;
            btn.textContent = 'å–å¾—ä¸­...';
            statusDiv.textContent = 'ä½ç½®æƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã¾ã™...';
            statusDiv.style.color = '#667eea';
            
            if (!navigator.geolocation) {
                statusDiv.textContent = 'ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ä½ç½®æƒ…å ±ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“';
                statusDiv.style.color = 'red';
                btn.disabled = false;
                btn.textContent = 'ğŸ“ ç¾åœ¨åœ°å–å¾—';
                return;
            }
            
            navigator.geolocation.getCurrentPosition(
                async function(position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    try {
                        // OpenStreetMap Nominatim APIã‚’ä½¿ç”¨ï¼ˆç„¡æ–™ãƒ»ç™»éŒ²ä¸è¦ï¼‰
                        const response = await fetch(
                            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&zoom=10&addressdetails=1&accept-language=ja`,
                            {
                                headers: {
                                    'User-Agent': 'StaffSearchApp/1.0'
                                }
                            }
                        );
                        
                        if (!response.ok) {
                            throw new Error('ä½æ‰€ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
                        }
                        
                        const data = await response.json();
                        
                        // ä½æ‰€æƒ…å ±ã‚’æŠ½å‡ºï¼ˆçœŒãƒ»å¸‚ãƒ»ç”ºã¾ã§ï¼‰
                        const address = data.address;
                        let formattedAddress = '';
                        
                        // éƒ½é“åºœçœŒ
                        if (address.state) {
                            formattedAddress += address.state;
                        } else if (address.province) {
                            formattedAddress += address.province;
                        }
                        
                        // å¸‚åŒºç”ºæ‘
                        if (address.city) {
                            formattedAddress += address.city;
                        } else if (address.town) {
                            formattedAddress += address.town;
                        } else if (address.village) {
                            formattedAddress += address.village;
                        } else if (address.county) {
                            formattedAddress += address.county;
                        }
                        
                        // ç”ºåŸŸ
                        if (address.suburb) {
                            formattedAddress += address.suburb;
                        } else if (address.neighbourhood) {
                            formattedAddress += address.neighbourhood;
                        }
                        
                        if (formattedAddress) {
                            addressInput.value = formattedAddress;
                            statusDiv.textContent = 'âœ“ ä½æ‰€ã‚’å–å¾—ã—ã¾ã—ãŸ';
                            statusDiv.style.color = 'green';
                        } else {
                            statusDiv.textContent = 'ä½æ‰€æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                            statusDiv.style.color = 'orange';
                        }
                        
                    } catch (error) {
                        console.error('Geocoding error:', error);
                        statusDiv.textContent = 'ä½æ‰€ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                        statusDiv.style.color = 'orange';
                    }
                    
                    btn.disabled = false;
                    btn.textContent = 'ğŸ“ ç¾åœ¨åœ°å–å¾—';
                },
                function(error) {
                    let errorMsg = '';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMsg = 'ä½ç½®æƒ…å ±ã®ä½¿ç”¨ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMsg = 'ä½ç½®æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ';
                            break;
                        case error.TIMEOUT:
                            errorMsg = 'ä½ç½®æƒ…å ±ã®å–å¾—ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ';
                            break;
                        default:
                            errorMsg = 'ä½ç½®æƒ…å ±ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';
                    }
                    statusDiv.textContent = errorMsg + 'ã€‚æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                    statusDiv.style.color = 'orange';
                    btn.disabled = false;
                    btn.textContent = 'ğŸ“ ç¾åœ¨åœ°å–å¾—';
                }
            );
        });

        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
        document.getElementById('staffRegisterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const storeName = document.getElementById('storeName').value;
            const companyName = document.getElementById('companyName').value;
            const age = document.getElementById('age').value;
            const address = document.getElementById('address').value;
            const gender = document.getElementById('gender').value;
            const jobTitle = document.getElementById('jobTitle').value;
            const experience = document.getElementById('experience').value;
            const bio = document.getElementById('bio').value;
            const email = document.getElementById('email').value;
            const hasPhoto = document.getElementById('photoUpload').files.length > 0;

            // ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
            const staffData = {
                name: name,
                storeName: storeName,
                companyName: companyName,
                age: age,
                address: address,
                gender: gender,
                jobTitle: jobTitle,
                experience: experience,
                bio: bio,
                email: email,
                hasPhoto: hasPhoto,
                registeredAt: new Date().toISOString(),
                plan: 'free' // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³
            };
            
            localStorage.setItem('staff_profile', JSON.stringify(staffData));
            localStorage.setItem('staff_logged_in', 'true');
            
            // ç™»éŒ²æˆåŠŸï¼ˆãƒ‡ãƒ¢ï¼‰
            alert(`ã‚¹ã‚¿ãƒƒãƒ•ç™»éŒ²å®Œäº†ï¼\nã‚ˆã†ã“ã ${name} ã•ã‚“\n\nãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å……å®Ÿã•ã›ã¦ã€å¤šãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¦‹ã¤ã‘ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†ï¼`);
            
            // ã‚¹ã‚¿ãƒƒãƒ•ã‚¢ãƒ—ãƒªã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
            window.location.href = 'https://5061-ivmmk44rjvkdnze0ep01h-5185f4aa.sandbox.novita.ai/';
        });
    </script>
</body>
</html>
